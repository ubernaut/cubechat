(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceEvent = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceEvent=(()=>{var f=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var T=(r,e)=>{for(var n in e)f(r,n,{get:e[n],enumerable:!0})},g=(r,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of x(e))!P.call(r,t)&&t!==n&&f(r,t,{get:()=>e[t],enumerable:!(o=y(e,t))||o.enumerable});return r};var m=r=>g(f({},"__esModule",{value:!0}),r);var A={};T(A,{raceEvent:()=>p});var c=class extends Error{static name="AbortError";name="AbortError";constructor(e="The operation was aborted",...n){super(e,...n)}};async function p(r,e,n,o){let t=new c(o?.errorMessage);o?.errorCode!=null&&(t.code=o.errorCode);let E=o?.errorEvent??"error";return n?.aborted===!0?Promise.reject(t):new Promise((h,a)=>{function i(){d(n,"abort",l),d(r,e,v),d(r,E,L)}let v=s=>{try{if(o?.filter?.(s)===!1)return}catch(w){i(),a(w);return}i(),h(s)},L=s=>{if(i(),s instanceof Error){a(s);return}a(s.detail??o?.error??new Error(`The "${o?.errorEvent}" event was emitted but the event had no '.detail' field. Pass an 'error' option to race-event to change this message.`))},l=()=>{i(),a(t)};u(n,"abort",l),u(r,e,v),u(r,E,L)})}function u(r,e,n){r!=null&&(b(r)?r.addEventListener(e,n):r.addListener(e,n))}function d(r,e,n){r!=null&&(b(r)?r.removeEventListener(e,n):r.removeListener(e,n))}function b(r){return typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}return m(A);})();
return RaceEvent}));
//# sourceMappingURL=index.min.js.map
