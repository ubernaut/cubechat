{"version":3,"file":"RTCDtlsTransport.cjs","sources":["../../../src/polyfill/RTCDtlsTransport.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport RTCIceTransport from './RTCIceTransport';\nimport RTCPeerConnection from './RTCPeerConnection';\n\nexport default class RTCDtlsTransport extends EventTarget implements globalThis.RTCDtlsTransport {\n  #pc: RTCPeerConnection = null;\n  #iceTransport = null;\n\n  onstatechange: globalThis.RTCDtlsTransport['onstatechange'] = null;\n  onerror: globalThis.RTCDtlsTransport['onstatechange'] = null;\n\n  constructor(init: { pc: RTCPeerConnection }) {\n    super();\n    this.#pc = init.pc;\n\n    this.#iceTransport = new RTCIceTransport({\n      pc: init.pc,\n    });\n\n    // forward peerConnection events\n    this.#pc.addEventListener('connectionstatechange', () => {\n      const e = new Event('statechange');\n      this.dispatchEvent(e);\n      this.onstatechange?.(e);\n    });\n  }\n\n  get iceTransport(): globalThis.RTCIceTransport {\n    return this.#iceTransport;\n  }\n\n  get state(): globalThis.RTCDtlsTransportState {\n    // reduce state from new, connecting, connected, disconnected, failed, closed, unknown\n    // to RTCDtlsTRansport states new, connecting, connected, closed, failed\n    let state = this.#pc ? this.#pc.connectionState : 'new';\n    if (state === 'disconnected') {\n      state = 'closed';\n    }\n    return state;\n  }\n\n  getRemoteCertificates(): ArrayBuffer[] {\n    // TODO: implement\n    return [new ArrayBuffer(0)];\n  }\n}\n"],"names":["RTCIceTransport"],"mappings":";;;;;;;;;;;;;;;;AAAA,IAAA,GAAA,EAAA,aAAA,CAAA;AAIA,MAAqB,yBAAyB,WAAmD,CAAA;AAAA,EAO/F,YAAY,IAAiC,EAAA;AAC3C,IAAM,KAAA,EAAA,CAAA;AAPR,IAAyB,YAAA,CAAA,IAAA,EAAA,GAAA,EAAA,IAAA,CAAA,CAAA;AACzB,IAAgB,YAAA,CAAA,IAAA,EAAA,aAAA,EAAA,IAAA,CAAA,CAAA;AAEhB,IAA8D,aAAA,CAAA,IAAA,EAAA,eAAA,EAAA,IAAA,CAAA,CAAA;AAC9D,IAAwD,aAAA,CAAA,IAAA,EAAA,SAAA,EAAA,IAAA,CAAA,CAAA;AAItD,IAAA,YAAA,CAAA,IAAA,EAAK,KAAM,IAAK,CAAA,EAAA,CAAA,CAAA;AAEhB,IAAK,YAAA,CAAA,IAAA,EAAA,aAAA,EAAgB,IAAIA,uBAAgB,CAAA;AAAA,MACvC,IAAI,IAAK,CAAA,EAAA;AAAA,KACV,CAAA,CAAA,CAAA;AAGD,IAAK,YAAA,CAAA,IAAA,EAAA,GAAA,CAAA,CAAI,gBAAiB,CAAA,uBAAA,EAAyB,MAAM;AACvD,MAAM,MAAA,CAAA,GAAI,IAAI,KAAA,CAAM,aAAa,CAAA,CAAA;AACjC,MAAA,IAAA,CAAK,cAAc,CAAC,CAAA,CAAA;AACpB,MAAA,IAAA,CAAK,gBAAgB,CAAC,CAAA,CAAA;AAAA,KACvB,CAAA,CAAA;AAAA,GACH;AAAA,EAEA,IAAI,YAA2C,GAAA;AAC7C,IAAA,OAAO,YAAK,CAAA,IAAA,EAAA,aAAA,CAAA,CAAA;AAAA,GACd;AAAA,EAEA,IAAI,KAA0C,GAAA;AAG5C,IAAA,IAAI,KAAQ,GAAA,YAAA,CAAA,IAAA,EAAK,GAAM,CAAA,GAAA,YAAA,CAAA,IAAA,EAAK,KAAI,eAAkB,GAAA,KAAA,CAAA;AAClD,IAAA,IAAI,UAAU,cAAgB,EAAA;AAC5B,MAAQ,KAAA,GAAA,QAAA,CAAA;AAAA,KACV;AACA,IAAO,OAAA,KAAA,CAAA;AAAA,GACT;AAAA,EAEA,qBAAuC,GAAA;AAErC,IAAA,OAAO,CAAC,IAAI,WAAY,CAAA,CAAC,CAAC,CAAA,CAAA;AAAA,GAC5B;AACF,CAAA;AAxCE,GAAA,GAAA,IAAA,OAAA,EAAA,CAAA;AACA,aAAA,GAAA,IAAA,OAAA,EAAA;;;;"}