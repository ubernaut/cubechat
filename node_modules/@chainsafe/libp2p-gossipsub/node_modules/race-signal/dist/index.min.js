(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceSignal = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceSignal=(()=>{var c=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var d=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var u=(t,e)=>{for(var r in e)c(t,r,{get:e[r],enumerable:!0})},b=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of d(e))!l.call(t,n)&&n!==r&&c(t,n,{get:()=>e[n],enumerable:!(o=s(e,n))||o.enumerable});return t};var f=t=>b(c({},"__esModule",{value:!0}),t);var m={};u(m,{AbortError:()=>a,raceSignal:()=>h});var a=class extends Error{type;code;constructor(e,r,o){super(e??"The operation was aborted"),this.type="aborted",this.name=o??"AbortError",this.code=r??"ABORT_ERR"}};async function h(t,e,r){if(e==null)return t;if(e.aborted)return t.catch(()=>{}),Promise.reject(new a(r?.errorMessage,r?.errorCode,r?.errorName));let o,n=new a(r?.errorMessage,r?.errorCode,r?.errorName);try{return await Promise.race([t,new Promise((w,i)=>{o=()=>{i(n)},e.addEventListener("abort",o)})])}finally{o!=null&&e.removeEventListener("abort",o)}}return f(m);})();
return RaceSignal}));
